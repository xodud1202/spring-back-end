<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xodud1202.springbackend.mapper.ResumeMapper">
	<resultMap id="experienceWithDetails" type="com.xodud1202.springbackend.domain.resume.ResumeExperienceBase">
		<id property="experienceNo" column="EXPERIENCE_NO"/>
		<result property="companyNm" column="COMPANY_NM"/>
		<result property="employmentType" column="EMPLOYMENT_TYPE"/>
		<result property="position" column="POSITION"/>
		<result property="duty" column="DUTY"/>
		<result property="workStartDt" column="WORK_START_DT"/>
		<result property="workEndDt" column="WORK_END_DT"/>

		<collection property="resumeExperienceDetailList"
		            javaType="java.util.List"
		            ofType="com.xodud1202.springbackend.domain.resume.ResumeExperienceDetail">
			<id property="experienceDtlNo" column="EXPERIENCE_DTL_NO"/>
			<result property="workTitle" column="WORK_TITLE"/>
			<result property="workDesc" column="WORK_DESC"/>
			<result property="workStartDt" column="WORK_DTL_START_DT"/>
			<result property="workEndDt" column="WORK_DTL_END_DT"/>
		</collection>
	</resultMap>

	<resultMap id="adminExperienceWithDetails" type="com.xodud1202.springbackend.domain.resume.ResumeExperienceBase">
		<id property="experienceNo" column="EXPERIENCE_NO"/>
		<result property="companyNm" column="COMPANY_NM"/>
		<result property="employmentTypeCd" column="EMPLOYMENT_TYPE_CD"/>
		<result property="position" column="POSITION"/>
		<result property="duty" column="DUTY"/>
		<result property="workStartDt" column="WORK_START_DT"/>
		<result property="workEndDt" column="WORK_END_DT"/>

		<collection property="resumeExperienceDetailList"
		            javaType="java.util.List"
		            ofType="com.xodud1202.springbackend.domain.resume.ResumeExperienceDetail"
		            notNullColumn="WORK_TITLE">
			<id property="experienceDtlNo" column="EXPERIENCE_DTL_NO"/>
			<result property="workTitle" column="WORK_TITLE"/>
			<result property="workDesc" column="WORK_DESC"/>
			<result property="workStartDt" column="WORK_DTL_START_DT"/>
			<result property="workEndDt" column="WORK_DTL_END_DT"/>
			<result property="sortSeq" column="SORT_SEQ"/>
		</collection>
	</resultMap>

	<!-- 이력서 경력 리스트 조회 -->
	<select id="getResumeExperienceWithDetails" resultMap="experienceWithDetails">
		/* ResumeMapper.getResumeExperienceWithDetails: 이력서 경력 리스트 조회 */
		SELECT REB.EXPERIENCE_NO
		     , REB.COMPANY_NM
		     , FN_GET_CODE_NM('EMPLOYMENT_TYPE', REB.EMPLOYMENT_TYPE_CD) AS EMPLOYMENT_TYPE
		     , REB.POSITION
		     , REB.DUTY
		     , DATE_FORMAT(REB.WORK_START_DT, '%Y.%m') AS WORK_START_DT
		     , DATE_FORMAT(REB.WORK_END_DT, '%Y.%m') AS WORK_END_DT
		     , RED.EXPERIENCE_DTL_NO
		     , RED.WORK_TITLE
		     , RED.WORK_DESC
		     , DATE_FORMAT(RED.WORK_START_DT, '%Y.%m') AS WORK_DTL_START_DT
		     , DATE_FORMAT(RED.WORK_END_DT, '%Y.%m') AS WORK_DTL_END_DT
		  FROM RESUME_EXPERIENCE_BASE REB
		 INNER JOIN RESUME_EXPERIENCE_DETAIL RED
		    ON RED.EXPERIENCE_NO = REB.EXPERIENCE_NO
		 WHERE REB.USR_NO = #{usrNo}
		   AND REB.DEL_YN = 'N'
		   AND RED.DEL_YN = 'N'
		 ORDER BY REB.WORK_START_DT DESC, RED.SORT_SEQ
	</select>

	<!-- 관리자 이력서 경력 리스트 조회 -->
	<select id="getAdminResumeExperienceList" resultMap="adminExperienceWithDetails">
		/* ResumeMapper.getAdminResumeExperienceList: 관리자 이력서 경력 리스트 조회 */
		SELECT REB.EXPERIENCE_NO
		     , REB.COMPANY_NM
		     , REB.EMPLOYMENT_TYPE_CD
		     , REB.POSITION
		     , REB.DUTY
		     , DATE_FORMAT(REB.WORK_START_DT, '%Y-%m') AS WORK_START_DT
		     , DATE_FORMAT(REB.WORK_END_DT, '%Y-%m') AS WORK_END_DT
		     , RED.EXPERIENCE_DTL_NO
		     , RED.WORK_TITLE
		     , RED.WORK_DESC
		     , DATE_FORMAT(RED.WORK_START_DT, '%Y-%m') AS WORK_DTL_START_DT
		     , DATE_FORMAT(RED.WORK_END_DT, '%Y-%m') AS WORK_DTL_END_DT
		     , RED.SORT_SEQ
		  FROM RESUME_EXPERIENCE_BASE REB
		  LEFT JOIN RESUME_EXPERIENCE_DETAIL RED
		    ON RED.EXPERIENCE_NO = REB.EXPERIENCE_NO
		   AND RED.DEL_YN = 'N'
		 WHERE REB.USR_NO = #{usrNo}
		   AND REB.DEL_YN = 'N'
		 ORDER BY REB.WORK_START_DT DESC, RED.SORT_SEQ
	</select>

	<!-- 관리자 이력서 경력 기본 정보 등록 -->
	<insert id="insertResumeExperienceBase" useGeneratedKeys="true" keyProperty="experienceNo">
		/* ResumeMapper.insertResumeExperienceBase: 관리자 이력서 경력 기본 정보 등록 */
		INSERT INTO RESUME_EXPERIENCE_BASE
		(USR_NO, COMPANY_NM, EMPLOYMENT_TYPE_CD, POSITION, DUTY, WORK_START_DT, WORK_END_DT, DEL_YN, REG_NO, UDT_NO)
		VALUES
		(#{usrNo}
		, #{companyNm}
		, #{employmentTypeCd}
		, #{position}
		, #{duty}
		, <choose>
			<when test="workStartDt != null and workStartDt != ''">
				STR_TO_DATE(CONCAT(#{workStartDt}, '-01'), '%Y-%m-%d')
			</when>
			<otherwise>NULL</otherwise>
		  </choose>
		, <choose>
			<when test="workEndDt != null and workEndDt != ''">
				STR_TO_DATE(CONCAT(#{workEndDt}, '-01'), '%Y-%m-%d')
			</when>
			<otherwise>NULL</otherwise>
		  </choose>
		, 'N'
		, #{usrNo}
		, #{usrNo}
		)
	</insert>

	<!-- 관리자 이력서 경력 기본 정보 수정 -->
	<update id="updateResumeExperienceBase">
		/* ResumeMapper.updateResumeExperienceBase: 관리자 이력서 경력 기본 정보 수정 */
		UPDATE RESUME_EXPERIENCE_BASE
		   SET COMPANY_NM = #{companyNm}
		     , EMPLOYMENT_TYPE_CD = #{employmentTypeCd}
		     , POSITION = #{position}
		     , DUTY = #{duty}
		     , WORK_START_DT = <choose>
				<when test="workStartDt != null and workStartDt != ''">
					STR_TO_DATE(CONCAT(#{workStartDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , WORK_END_DT = <choose>
				<when test="workEndDt != null and workEndDt != ''">
					STR_TO_DATE(CONCAT(#{workEndDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EXPERIENCE_NO = #{experienceNo}
		   AND USR_NO = #{usrNo}
	</update>

	<!-- 관리자 이력서 경력 기본 정보 삭제 처리 -->
	<update id="softDeleteResumeExperienceBase">
		/* ResumeMapper.softDeleteResumeExperienceBase: 관리자 이력서 경력 기본 정보 삭제 처리 */
		UPDATE RESUME_EXPERIENCE_BASE
		   SET DEL_YN = 'Y'
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EXPERIENCE_NO = #{experienceNo}
		   AND USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 관리자 이력서 경력 상세 삭제 처리 -->
	<update id="softDeleteResumeExperienceDetail">
		/* ResumeMapper.softDeleteResumeExperienceDetail: 관리자 이력서 경력 상세 삭제 처리 */
		UPDATE RESUME_EXPERIENCE_DETAIL
		   SET DEL_YN = 'Y'
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EXPERIENCE_NO = #{experienceNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 관리자 이력서 경력 상세 목록 조회 -->
	<select id="getResumeExperienceDetailList" resultType="com.xodud1202.springbackend.domain.resume.ResumeExperienceDetail">
		/* ResumeMapper.getResumeExperienceDetailList: 관리자 이력서 경력 상세 목록 조회 */
		SELECT EXPERIENCE_DTL_NO
		     , USR_NO
		     , WORK_TITLE
		     , WORK_DESC
		     , DATE_FORMAT(WORK_START_DT, '%Y-%m') AS WORK_START_DT
		     , DATE_FORMAT(WORK_END_DT, '%Y-%m') AS WORK_END_DT
		     , SORT_SEQ
		  FROM RESUME_EXPERIENCE_DETAIL
		 WHERE EXPERIENCE_NO = #{experienceNo}
		   AND USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
		 ORDER BY SORT_SEQ
	</select>

	<!-- 관리자 이력서 경력 상세 수정 -->
	<update id="updateResumeExperienceDetail">
		/* ResumeMapper.updateResumeExperienceDetail: 관리자 이력서 경력 상세 수정 */
		UPDATE RESUME_EXPERIENCE_DETAIL
		   SET WORK_TITLE = #{detail.workTitle}
		     , WORK_DESC = #{detail.workDesc}
		     , WORK_START_DT = <choose>
				<when test="detail.workStartDt != null and detail.workStartDt != ''">
					STR_TO_DATE(CONCAT(#{detail.workStartDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , WORK_END_DT = <choose>
				<when test="detail.workEndDt != null and detail.workEndDt != ''">
					STR_TO_DATE(CONCAT(#{detail.workEndDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , SORT_SEQ = #{detail.sortSeq}
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EXPERIENCE_NO = #{experienceNo}
		   AND EXPERIENCE_DTL_NO = #{detail.experienceDtlNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 관리자 이력서 경력 상세 삭제 처리 (선택 항목) -->
	<update id="softDeleteResumeExperienceDetailByIds">
		/* ResumeMapper.softDeleteResumeExperienceDetailByIds: 관리자 이력서 경력 상세 선택 삭제 처리 */
		UPDATE RESUME_EXPERIENCE_DETAIL
		   SET DEL_YN = 'Y'
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EXPERIENCE_NO = #{experienceNo}
		   AND DEL_YN = 'N'
		   AND EXPERIENCE_DTL_NO IN
		   <foreach collection="detailIds" item="id" open="(" separator="," close=")">
			   #{id}
		   </foreach>
	</update>

	<!-- 관리자 이력서 경력 상세 등록 -->
	<insert id="insertResumeExperienceDetails">
		/* ResumeMapper.insertResumeExperienceDetails: 관리자 이력서 경력 상세 등록 */
		INSERT INTO RESUME_EXPERIENCE_DETAIL
		(EXPERIENCE_NO, SORT_SEQ, WORK_TITLE, WORK_START_DT, WORK_END_DT, WORK_DESC, DEL_YN, REG_NO, UDT_NO)
		VALUES
		<foreach collection="detailList" item="detail" separator=",">
			(#{experienceNo}
			, #{detail.sortSeq}
			, #{detail.workTitle}
			, <choose>
				<when test="detail.workStartDt != null and detail.workStartDt != ''">
					STR_TO_DATE(CONCAT(#{detail.workStartDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			  </choose>
			, <choose>
				<when test="detail.workEndDt != null and detail.workEndDt != ''">
					STR_TO_DATE(CONCAT(#{detail.workEndDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			  </choose>
			, #{detail.workDesc}
			, 'N'
			, #{usrNo}
			, #{usrNo}
			)
		</foreach>
	</insert>

	<!-- 이력서 기타 경력 및 자격 조회 -->
	<select id="getResumeOtherExperienceList" resultType="com.xodud1202.springbackend.domain.resume.ResumeOtherExperience">
		/* ResumeMapper.getResumeOtherExperienceList: 이력서 기타 경력 및 자격 조회 */
		SELECT EXPERIENCE_TITLE
		     , EXPERIENCE_SUB_TITLE
		     , EXPERIENCE_DESC
		     , DATE_FORMAT(ROE.EXPERIENCE_START_DT, '%Y.%m') AS EXPERIENCE_START_DT
		     , DATE_FORMAT(ROE.EXPERIENCE_END_DT, '%Y.%m')   AS EXPERIENCE_END_DT
		  FROM RESUME_OTHER_EXPERIENCE ROE
		 WHERE ROE.DEL_YN = 'N'
		   AND ROE.USR_NO = #{usrNo}
		 ORDER BY SORT_SEQ
	</select>

	<!-- 관리자 이력서 기타 경력 및 자격 조회 -->
	<select id="getAdminResumeOtherExperienceList" resultType="com.xodud1202.springbackend.domain.resume.ResumeOtherExperience">
		/* ResumeMapper.getAdminResumeOtherExperienceList: 관리자 이력서 기타 경력 및 자격 조회 */
		SELECT OTHER_EXPERIENCE_NO
		     , USR_NO
		     , SORT_SEQ
		     , EXPERIENCE_TITLE
		     , EXPERIENCE_SUB_TITLE
		     , EXPERIENCE_DESC
		     , DATE_FORMAT(ROE.EXPERIENCE_START_DT, '%Y-%m') AS EXPERIENCE_START_DT
		     , DATE_FORMAT(ROE.EXPERIENCE_END_DT, '%Y-%m')   AS EXPERIENCE_END_DT
		  FROM RESUME_OTHER_EXPERIENCE ROE
		 WHERE ROE.DEL_YN = 'N'
		   AND ROE.USR_NO = #{usrNo}
		 ORDER BY SORT_SEQ
	</select>

	<!-- 관리자 이력서 기타 경력 및 자격 등록 -->
	<insert id="insertResumeOtherExperience" useGeneratedKeys="true" keyProperty="otherExperienceNo">
		/* ResumeMapper.insertResumeOtherExperience: 관리자 이력서 기타 경력 및 자격 등록 */
		INSERT INTO RESUME_OTHER_EXPERIENCE
		(USR_NO, SORT_SEQ, EXPERIENCE_TITLE, EXPERIENCE_START_DT, EXPERIENCE_END_DT, EXPERIENCE_SUB_TITLE, EXPERIENCE_DESC, DEL_YN, REG_NO, UDT_NO)
		VALUES
		(#{usrNo}
		, #{sortSeq}
		, #{experienceTitle}
		, <choose>
			<when test="experienceStartDt != null and experienceStartDt != ''">
				STR_TO_DATE(CONCAT(#{experienceStartDt}, '-01'), '%Y-%m-%d')
			</when>
			<otherwise>NULL</otherwise>
		  </choose>
		, <choose>
			<when test="experienceEndDt != null and experienceEndDt != ''">
				STR_TO_DATE(CONCAT(#{experienceEndDt}, '-01'), '%Y-%m-%d')
			</when>
			<otherwise>NULL</otherwise>
		  </choose>
		, #{experienceSubTitle}
		, #{experienceDesc}
		, 'N'
		, #{usrNo}
		, #{usrNo}
		)
	</insert>

	<!-- 관리자 이력서 기타 경력 및 자격 수정 -->
	<update id="updateResumeOtherExperience">
		/* ResumeMapper.updateResumeOtherExperience: 관리자 이력서 기타 경력 및 자격 수정 */
		UPDATE RESUME_OTHER_EXPERIENCE
		   SET SORT_SEQ = #{sortSeq}
		     , EXPERIENCE_TITLE = #{experienceTitle}
		     , EXPERIENCE_SUB_TITLE = #{experienceSubTitle}
		     , EXPERIENCE_DESC = #{experienceDesc}
		     , EXPERIENCE_START_DT = <choose>
				<when test="experienceStartDt != null and experienceStartDt != ''">
					STR_TO_DATE(CONCAT(#{experienceStartDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , EXPERIENCE_END_DT = <choose>
				<when test="experienceEndDt != null and experienceEndDt != ''">
					STR_TO_DATE(CONCAT(#{experienceEndDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE OTHER_EXPERIENCE_NO = #{otherExperienceNo}
		   AND USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 관리자 이력서 기타 경력 및 자격 삭제 -->
	<update id="softDeleteResumeOtherExperience">
		/* ResumeMapper.softDeleteResumeOtherExperience: 관리자 이력서 기타 경력 및 자격 삭제 */
		UPDATE RESUME_OTHER_EXPERIENCE
		   SET DEL_YN = 'Y'
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE OTHER_EXPERIENCE_NO = #{otherExperienceNo}
		   AND USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 이력서 학력 리스트 조회 -->
	<select id="getResumeEducationList" resultType="com.xodud1202.springbackend.domain.resume.ResumeEducation">
		/* ResumeMapper.getResumeEducationList: 이력서 학력 리스트 조회 */
		SELECT EDUCATION_NO
		     , EDUCATION_NM
		     , DEPARTMENT
		     , EDUCATION_SCORE
		     , FN_GET_CODE_NM('EDUCATION_STAT', EDUCATION_STAT_CD) AS EDUCATION_STAT
		     , DATE_FORMAT(EDUCATION_START_DT, '%Y.%m') AS EDUCATION_START_DT
		     , DATE_FORMAT(EDUCATION_END_DT, '%Y.%m') AS EDUCATION_END_DT
		     , LOGO_PATH
		  FROM RESUME_EDUCATION A
		 WHERE USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
		 ORDER BY EDUCATION_START_DT DESC
	</select>

	<!-- 관리자 이력서 학력 리스트 조회 -->
	<select id="getAdminResumeEducationList" resultType="com.xodud1202.springbackend.domain.resume.ResumeEducation">
		/* ResumeMapper.getAdminResumeEducationList: 관리자 이력서 학력 리스트 조회 */
		SELECT EDUCATION_NO
		     , EDUCATION_NM
		     , DEPARTMENT
		     , EDUCATION_SCORE
		     , EDUCATION_STAT_CD
		     , DATE_FORMAT(EDUCATION_START_DT, '%Y-%m') AS EDUCATION_START_DT
		     , DATE_FORMAT(EDUCATION_END_DT, '%Y-%m') AS EDUCATION_END_DT
		     , LOGO_PATH
		  FROM RESUME_EDUCATION
		 WHERE USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
		 ORDER BY EDUCATION_START_DT DESC
	</select>

	<!-- 관리자 이력서 학력 등록 -->
	<insert id="insertResumeEducation" useGeneratedKeys="true" keyProperty="educationNo">
		/* ResumeMapper.insertResumeEducation: 관리자 이력서 학력 등록 */
		INSERT INTO RESUME_EDUCATION
		(USR_NO, EDUCATION_NM, DEPARTMENT, EDUCATION_SCORE, EDUCATION_STAT_CD, EDUCATION_START_DT, EDUCATION_END_DT, LOGO_PATH, DEL_YN, REG_NO, UDT_NO)
		VALUES
		(#{usrNo}
		, #{educationNm}
		, #{department}
		, #{educationScore}
		, #{educationStatCd}
		, <choose>
			<when test="educationStartDt != null and educationStartDt != ''">
				STR_TO_DATE(CONCAT(#{educationStartDt}, '-01'), '%Y-%m-%d')
			</when>
			<otherwise>NULL</otherwise>
		  </choose>
		, <choose>
			<when test="educationEndDt != null and educationEndDt != ''">
				STR_TO_DATE(CONCAT(#{educationEndDt}, '-01'), '%Y-%m-%d')
			</when>
			<otherwise>NULL</otherwise>
		  </choose>
		, #{logoPath}
		, 'N'
		, #{usrNo}
		, #{usrNo}
		)
	</insert>

	<!-- 관리자 이력서 학력 수정 -->
	<update id="updateResumeEducation">
		/* ResumeMapper.updateResumeEducation: 관리자 이력서 학력 수정 */
		UPDATE RESUME_EDUCATION
		   SET EDUCATION_NM = #{educationNm}
		     , DEPARTMENT = #{department}
		     , EDUCATION_SCORE = #{educationScore}
		     , EDUCATION_STAT_CD = #{educationStatCd}
		     , EDUCATION_START_DT = <choose>
				<when test="educationStartDt != null and educationStartDt != ''">
					STR_TO_DATE(CONCAT(#{educationStartDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , EDUCATION_END_DT = <choose>
				<when test="educationEndDt != null and educationEndDt != ''">
					STR_TO_DATE(CONCAT(#{educationEndDt}, '-01'), '%Y-%m-%d')
				</when>
				<otherwise>NULL</otherwise>
			   </choose>
		     , LOGO_PATH = #{logoPath}
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EDUCATION_NO = #{educationNo}
		   AND USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 관리자 이력서 학력 삭제 -->
	<update id="softDeleteResumeEducation">
		/* ResumeMapper.softDeleteResumeEducation: 관리자 이력서 학력 삭제 */
		UPDATE RESUME_EDUCATION
		   SET DEL_YN = 'Y'
		     , UDT_NO = #{usrNo}
		     , UDT_DT = NOW()
		 WHERE EDUCATION_NO = #{educationNo}
		   AND USR_NO = #{usrNo}
		   AND DEL_YN = 'N'
	</update>

	<!-- 어드민 이력서 관리 검색 리스트 조회 -->
	<select id="getAdminResumeList" resultType="com.xodud1202.springbackend.domain.admin.resume.ResumeVO">
		SELECT RB.USR_NO
		     , RB.USER_NM AS RESUME_NM
		     , UB.USER_NM
		     , UB.LOGIN_ID
		     , RB.MOBILE
		     , RB.EMAIL
		     , RB.LAST_PAY
		     , RB.SUB_TITLE
		     , RB.MOBILE
		     , RB.EMAIL
		     , RB.PORTFOLIO
		     , RB.FACE_IMG_PATH
		     , RB.SKILLS
		     , RB.ADDR
		     , RB.REG_DT
		     , RB.UDT_DT
		  FROM USER_BASE UB
		     , RESUME_BASE RB
		 WHERE UB.USR_NO = RB.USR_NO
		   AND UB.USR_STAT_CD = '02'
		   AND RB.DEL_YN = 'N'
		<if test="searchValue != null and searchValue != ''">
			<choose>
				<when test="searchGb == 'usrNo'">
		   AND UB.USR_NO = #{searchValue}
				</when>
				<when test="searchGb == 'userNm'">
		   AND UB.USER_NM LIKE CONCAT(#{searchValue}, '%')
				</when>
				<when test="searchGb == 'loginId'">
		   AND UB.LOGIN_ID LIKE CONCAT(#{searchValue}, '%')
				</when>
			</choose>
		</if>
		 ORDER BY UB.USR_NO DESC
		 LIMIT #{pageSize} OFFSET #{offset}
	</select>

	<select id="getAdminResumeCount" resultType="int">
		SELECT COUNT(1)
		  FROM USER_BASE UB
		     , RESUME_BASE RB
		 WHERE UB.USR_NO = RB.USR_NO
		   AND UB.USR_STAT_CD = '02'
		   AND RB.DEL_YN = 'N'
		<if test="searchValue != null and searchValue != ''">
			<choose>
				<when test="searchGb == 'usrNo'">
		   AND UB.USR_NO = #{searchValue}
				</when>
				<when test="searchGb == 'userNm'">
		   AND UB.USER_NM LIKE CONCAT(#{searchValue}, '%')
				</when>
				<when test="searchGb == 'loginId'">
		   AND UB.LOGIN_ID LIKE CONCAT(#{searchValue}, '%')
				</when>
			</choose>
		</if>
	</select>
</mapper>
